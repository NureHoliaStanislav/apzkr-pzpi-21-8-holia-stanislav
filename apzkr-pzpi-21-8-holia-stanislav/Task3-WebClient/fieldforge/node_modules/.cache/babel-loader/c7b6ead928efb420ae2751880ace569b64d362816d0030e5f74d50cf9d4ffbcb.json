{"ast":null,"code":"import axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\naxios.defaults.baseURL = 'http://localhost:8000';\nclass AuthService {\n  login(credentials) {\n    if (!credentials.email || !credentials.password) {\n      throw new Error('Email and password are required');\n    }\n    return axios.post('/api/user/login', credentials).then(response => {\n      const token = response.data.user.token;\n      if (typeof token === 'string') {\n        localStorage.setItem('token', token);\n        return jwtDecode(token);\n      }\n      throw new Error('Token is not a string');\n    });\n  }\n  logout() {\n    localStorage.removeItem('token');\n  }\n  getCurrentUser() {\n    try {\n      const token = localStorage.getItem('token');\n      if (typeof token === 'string') {\n        return jwtDecode(token);\n      }\n      return null;\n    } catch (ex) {\n      return null;\n    }\n  }\n}\nconst authServiceInstance = new AuthService();\nexport default authServiceInstance;","map":{"version":3,"names":["axios","jwtDecode","defaults","baseURL","AuthService","login","credentials","email","password","Error","post","then","response","token","data","user","localStorage","setItem","logout","removeItem","getCurrentUser","getItem","ex","authServiceInstance"],"sources":["/home/stanislav/Desktop/NURE/works/3 курс/2 семестр/апз/apz-pzpi-21-8-holia-stanislav/Task4/apz-pzpi-21-8-holia-stanislav-task4/fieldforge/src/shared/AuthService.js"],"sourcesContent":["import axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\naxios.defaults.baseURL = 'http://localhost:8000';\nclass AuthService {\n  login(credentials) {\n    if (!credentials.email || !credentials.password) {\n      throw new Error('Email and password are required');\n    }\n  \n    return axios\n      .post('/api/user/login', credentials)\n      .then(response => {\n        const token = response.data.user.token;\n        if (typeof token === 'string') {\n          localStorage.setItem('token', token);\n          return jwtDecode(token);\n        }\n        throw new Error('Token is not a string');\n      });\n  }\n\n  logout() {\n    localStorage.removeItem('token');\n  }\n\n  getCurrentUser() {\n    try {\n      const token = localStorage.getItem('token');\n      if (typeof token === 'string') {\n        return jwtDecode(token);\n      }\n      return null;\n    } catch (ex) {\n      return null;\n    }\n  }\n}\n\nconst authServiceInstance = new AuthService();\n\nexport default authServiceInstance;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtCD,KAAK,CAACE,QAAQ,CAACC,OAAO,GAAG,uBAAuB;AAChD,MAAMC,WAAW,CAAC;EAChBC,KAAKA,CAACC,WAAW,EAAE;IACjB,IAAI,CAACA,WAAW,CAACC,KAAK,IAAI,CAACD,WAAW,CAACE,QAAQ,EAAE;MAC/C,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;IACpD;IAEA,OAAOT,KAAK,CACTU,IAAI,CAAC,iBAAiB,EAAEJ,WAAW,CAAC,CACpCK,IAAI,CAACC,QAAQ,IAAI;MAChB,MAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACC,IAAI,CAACF,KAAK;MACtC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;QAC7BG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;QACpC,OAAOZ,SAAS,CAACY,KAAK,CAAC;MACzB;MACA,MAAM,IAAIJ,KAAK,CAAC,uBAAuB,CAAC;IAC1C,CAAC,CAAC;EACN;EAEAS,MAAMA,CAAA,EAAG;IACPF,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC;EAClC;EAEAC,cAAcA,CAAA,EAAG;IACf,IAAI;MACF,MAAMP,KAAK,GAAGG,YAAY,CAACK,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,OAAOR,KAAK,KAAK,QAAQ,EAAE;QAC7B,OAAOZ,SAAS,CAACY,KAAK,CAAC;MACzB;MACA,OAAO,IAAI;IACb,CAAC,CAAC,OAAOS,EAAE,EAAE;MACX,OAAO,IAAI;IACb;EACF;AACF;AAEA,MAAMC,mBAAmB,GAAG,IAAInB,WAAW,CAAC,CAAC;AAE7C,eAAemB,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}